function centerLink(o){$("div.component").css({opacity:.4,filter:"alpha(opacity=40)"}),$.post(o,function(o){$("div.component").html(o),$("div.component").css({opacity:1,filter:"alpha(opacity=100)"})})}function deleteWallRecord(o,p,e,t){core.confirm(LANG_CONFIRM_DEL_POST_ON_WALL,null,function(){$("#wall_entry_"+e).css("background","#FFAEAE").fadeOut(),$.post("/core/ajax/wall.php",{target_id:p,component:o,do_wall:"delete",csrf_token:t,record_id:e},function(o){o&&wallPage(1)})})}function addWall(o,p){core.message(LANG_NEW_POST_ON_WALL),$.post("/core/ajax/wall.php",{target_id:p,component:o,do_wall:"add"},function(o){0==o.error?($("#popup_message").html(o.html),$("#popup_progress").hide(),$("#popup_ok").val(LANG_ADD).show(),$("#popup_ok").click(function(){$("#popup_ok").prop("disabled",!0),$("#popup_panel .ajax-loader").show();var o={success:doaddWall};$("#add_wall_form").ajaxSubmit(o)})):core.alert(o.text,LANG_ERROR)},"json")}function doaddWall(o,p,e,t){$(".ajax-loader").hide(),"success"==p?0==o.error?(core.box_close(),wallPage(1)):(core.show_popup_info(o.text,"error"),$("#popup_ok").prop("disabled",!1)):core.alert(p,LANG_ERROR)}function wallPage(o){var p=$("div.wall_body input[name=target_id]").val(),e=$("div.wall_body input[name=component]").val();$("div.wall_body").css({opacity:.5,filter:"alpha(opacity=50)"}),$.post("/core/ajax/wall.php",{target_id:p,component:e,page:o},function(o){$("div.wall_body").html(o),$("div.wall_body").css({opacity:1,filter:"alpha(opacity=100)"})})}function setLang(o){$("body").append('<form id="lform" style="display:none" method="post" action="/set_lang.php"><input type="hidden" name="lang" value="'+o+'"/></form>'),$("#lform").submit()}!function(l){function t(o){var p;return o&&o.constructor==Array&&3==o.length?o:(p=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(o))?[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]:(p=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(o))?[2.55*parseFloat(p[1]),2.55*parseFloat(p[2]),2.55*parseFloat(p[3])]:(p=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(o))?[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]:(p=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(o))?[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]:colors[jQuery.trim(o).toLowerCase()]}core={verticalOffset:-390,horizontalOffset:0,repositionOnResize:!0,draggable:!0,dialogClass:null,alert:function(o,p,e){null==p&&(p=LANG_ATTENTION),this._show_mess(p,o,null,"alert",function(o){e&&e(o)})},confirm:function(o,p,e){null==p&&(p=LANG_CONFIRM),this._show_mess(p,o,null,"confirm",function(o){o&&e(o)})},prompt:function(o,p,e,t){null==e&&(e="Prompt"),this._show_mess(e,o,p,"prompt",t)},message:function(o){null==o&&(o=""),this._show_mess(o,"","","message")},box_close:function(){l("#popup_container").fadeOut(200,function(){l("#popup_overlay, #popup_container").remove()})},_show_mess:function(o,p,e,t,n){0<l("#popup_container").length&&l("#popup_overlay, #popup_container").remove();var a="<div id='popup_container'><div class='popup_body'><div class='popup_title_wrap'><div class='popup_x_button'/><div id='popup_title'/></div><div id='popup_progress'><i class='fa fa-spinner fa-spin fa-2x'></i><img src='/images/progress.gif' alt="+LANG_LOADING+"'...' /></div><div id='popup_content'/><div id='popup_message'/><div id='popup_panel'><span class='ajax-loader'>&nbsp;</span><div id='popup_info'/><input id='popup_ok' type='button' class='button_yes' value='"+LANG_CONTINUE+"'/><input id='popup_cancel' type='button' class='button_no' value='"+LANG_CANCEL+"'/><input id='popup_close' type='button' class='button_no' value='"+LANG_CLOSE+"'/></div></div>";this._overlay("show"),l("body").append(a),l("#popup_panel input").hide(),this.dialogClass&&l("#popup_container").addClass(this.dialogClass);var i=navigator.userAgent,s=0,r=!1;if(-1!=i.indexOf("MSIE")){r=!0;s=i.replace(/.+(MSIE)\s(\d\d?)(\.?\d?).+/i,"$2")}var c=r&&s<=6||l(window).height()<480||l(window).width()<700?"absolute":"fixed";switch(l("#popup_container").css({position:c}),l("#popup_title").text(o),l("#popup_content").addClass(t),l("#popup_message").text('<span class="box_message_content">'+p+"</span>"),l("#popup_message").html(l("#popup_message").text().replace(/\n/g,"<br />")),l("#popup_container").css({minWidth:l("#popup_container").outerWidth(),maxWidth:l("#popup_container").outerWidth()}),this._reposition(),this._maintainPosition(!0),t){case"alert":l("#popup_close").show(),l("#popup_overlay, #popup_close, .popup_x_button").click(function(){core.box_close(),n(!0)}),l("#popup_close").keypress(function(o){27!=o.keyCode&&13!=o.keyCode||l("#popup_close").trigger("click")}),l("#popup_close").focus().select();break;case"confirm":l("#popup_ok, #popup_cancel").show(),l("#popup_ok").click(function(){n&&n(!0)}),l("#popup_overlay, #popup_cancel ,#popup_close, .popup_x_button").click(function(){core.box_close(),n(!1)}),l("#popup_ok").click(function(){core.box_close()}),l("#popup_cancel").focus().select();break;case"prompt":l("#popup_message").append('<input id="popup_prompt" name="popup_prompt" value="'+e+'"/>'),l("#popup_prompt").width(l("#popup_message").width()),l("#popup_ok").val(LANG_SEND),l("#popup_ok, #popup_cancel").show(),l("#popup_ok").click(function(){var o=l("#popup_prompt").val();o&&n&&n(o)}),l("#popup_overlay, #popup_cancel, .popup_x_button").click(function(){core.box_close(),n&&n(null)}),l("#popup_prompt, #popup_ok, #popup_close").keypress(function(o){27==o.keyCode&&l("#popup_cancel").trigger("click")}),l("#popup_prompt").focus().select();break;case"message":l("#popup_cancel, #popup_progress").show(),l("#popup_overlay, #popup_cancel ,#popup_close, .popup_x_button").focus().select().click(function(){core.box_close()})}},_overlay:function(o){switch(o){case"show":this._overlay("hide"),l("body").append('<div id="popup_overlay"></div>'),l("#popup_overlay").css({height:l(document).height()});break;case"hide":l("#popup_overlay").remove()}},_reposition:function(){var o=window.screen.availHeight/2+this.verticalOffset,p=l(window).width()/2-l("#popup_container").outerWidth()/2+this.horizontalOffset;o<0&&(o=0),p<0&&(p=0),l("#popup_container").css({top:o,left:p});var e=navigator.userAgent,t=0,n=!1;if(-1!=e.indexOf("MSIE")){n=!0;t=e.replace(/.+(MSIE)\s(\d\d?)(\.?\d?).+/i,"$2")}(n&&t<=6||l(window).height()<480||l(window).width()<700)&&(o+=l(window).scrollTop()),l("#popup_overlay").height(l(document).height())},_maintainPosition:function(o){if(this.repositionOnResize)switch(o){case!0:l(window).bind("resize",this._reposition);break;case!1:l(window).unbind("resize",this._reposition)}},show_popup_info:function(o,p){this._popup_info(p),l("#popup_info").html(o).show().delay(4e3).fadeOut("slow")},hide_popup_info:function(){this.show_popup_info(""),l("#popup_info").text("").hide()},_popup_info:function(o){l("#popup_info").hide(),l("#popup_info").attr("class",o)},show_error_field:function(o){o.animate({backgroundColor:"#e6a4a4"},{duration:200}),o.animate({backgroundColor:"#ffffff"},{duration:200}),o.css({border:"1px solid red"})},hide_error_field:function(o){o.css({border:"1px solid #aaa"})}},jQuery.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(o,p){jQuery.fx.step[p]=function(o){0==o.state&&(o.start=function(o,p){var e;do{if(""!=(e=jQuery.curCSS(o,p))&&"transparent"!=e||jQuery.nodeName(o,"body"))break;p="backgroundColor"}while(o=o.parentNode);return t(e)}(o.elem,p),o.end=t(o.end)),o.elem.style[p]="rgb("+[Math.max(Math.min(parseInt(o.pos*(o.end[0]-o.start[0])+o.start[0]),255),0),Math.max(Math.min(parseInt(o.pos*(o.end[1]-o.start[1])+o.start[1]),255),0),Math.max(Math.min(parseInt(o.pos*(o.end[2]-o.start[2])+o.start[2]),255),0)].join(",")+")"}})}(jQuery);